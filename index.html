<!DOCTYPE html>
<meta charset='utf-8'>
<meta name="viewport" content="user-scalable=0"/>
<!-- <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> -->
<link rel="stylesheet" type="text/css" href="public/style.css">

<body>
  <div class='graph'></div>
</body>



<!-- hot-server appends this snippit to inject code via a websock  -->
<script>
var wsPath = location.origin.replace(/^http/, 'ws')
if (wsPath.includes('roadtolarissa')){
	wsPath = 'ws://45.55.134.216:3989'
	window.location = 'http://45.55.134.216:3989'
}


window.ws = new WebSocket(wsPath)

ws.onmessage = function(msg) {
  var parsedData = JSON.parse(msg.data)

  if (parsedData.type == 'jsInject') {
    var script = document.createElement('script')
    script.textContent = parsedData.str
    document.head.appendChild(script)
    script.remove()
  }

  if (parsedData.type == 'cssInject') {
    var linkNodes = document.getElementsByTagName('link')
    Array.prototype.forEach.call(linkNodes, function(d){ d.href = d.href })
  }

  if (parsedData.type == 'reload') location.reload()


  if (window.wsMessage) window.wsMessage(parsedData)
}
</script>



<script src='public/d3_.js'></script>
<script src='public/sound.js'></script>
<script src='public/script.js'></script>
